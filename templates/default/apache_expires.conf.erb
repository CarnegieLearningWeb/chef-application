# Deal with mangled headers from proxy servers
SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|[X~-]{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding

AddOutputFilterByType DEFLATE application/atom+xml application/javascript application/json application/ld+json application/manifest+json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/html text/plain text/vtt text/x-component text/xml

Header merge Cache-Control "no-transform"
Header unset ETag

FileETag None

ExpiresActive on
ExpiresDefault                              "access plus 1 month"

# CSS
ExpiresByType text/css                      "access plus 1 year"

# Data Interchange
ExpiresByType application/json              "access plus 0 seconds"
ExpiresByType application/ld+json           "access plus 0 seconds"
ExpiresByType application/xml               "access plus 0 seconds"
ExpiresByType text/xml                      "access plus 0 seconds"

# Favicon
ExpiresByType image/x-icon                  "access plus 1 week"

# HTML
ExpiresByType text/html                     "access plus 0 seconds"

# JavaScript
ExpiresByType application/javascript        "access plus 1 year"

# Media
ExpiresByType audio/ogg                     "access plus 1 month"
ExpiresByType image/gif                     "access plus 1 month"
ExpiresByType image/jpeg                    "access plus 1 month"
ExpiresByType image/png                     "access plus 1 month"
ExpiresByType video/mp4                     "access plus 1 month"
ExpiresByType video/ogg                     "access plus 1 month"
ExpiresByType video/webm                    "access plus 1 month"

# Feeds
ExpiresByType application/atom+xml          "access plus 1 hour"
ExpiresByType application/rss+xml           "access plus 1 hour"

# Fonts
ExpiresByType application/font-woff         "access plus 1 month"
ExpiresByType application/vnd.ms-fontobject "access plus 1 month"
ExpiresByType application/x-font-ttf        "access plus 1 month"
ExpiresByType font/opentype                 "access plus 1 month"
ExpiresByType image/svg+xml                 "access plus 1 month"
